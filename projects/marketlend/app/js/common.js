$(document).ready(function(){function e(e){var a=/^\d[\d\(\)\ -]{4,14}\d$/,r=e.val();a.test(r)?(e.addClass("checked"),e.removeClass("has_error")):(e.removeClass("checked"),e.addClass("has_error")),""==r&&(e.removeClass("checked"),e.removeClass("has_error"))}function a(e){var a=/^([a-z0-9_\.-])+@[a-z0-9-]+\.([a-z]{2,4}\.)?[a-z]{2,4}$/i,r=e.val();a.test(r)?(e.addClass("checked"),e.removeClass("has_error")):(e.removeClass("checked"),e.addClass("has_error")),""==r&&(e.removeClass("checked"),e.removeClass("has_error"))}function r(){s.hasClass("checked")&&t.hasClass("checked")?($(".calculation_message").css("display","block"),n.prop("disabled",!1)):n.prop("disabled","disabled")}$(window).on("scroll",function(){var e=$(window).scrollTop(),a=$("#invest_count"),r=a.attr("data-value"),s=$.animateNumber.numberStepFactories.separator(",");e>=5?$(".header").addClass("fixed"):$(".header").removeClass("fixed"),0!=a.length&&e>a.offset().top-$(window).height()+50&&a.animateNumber({number:r,numberStep:s},1e3)}),$(".range_summ").asRange({keyboard:!0,tip:!0,format:function(e){e=e.toString();for(var a=/(-?\d+)(\d{3})/;a.test(e);)e=e.replace(a,"$1 $2");return e}}),$(".range_summ").on("asRange::change",function(e){var a=$("#summ").val(),r=$("#time").val(),s=$(".monthly_repaymant"),t=$(".total_payable"),o=1.3/100*5e4+.0042*(a-5e4),n=(1.3/100*5e4+.0042*(a-5e4))*r,l=o.toFixed(0),d=n.toFixed(0);l=l.replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 "),d=d.replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 "),s.html("$"+l),t.html("$"+d)});var s=$("#email"),t=$("#phone"),o=$(".text_input"),n=$(".form_btn");s.blur(function(){a(s)}),s.mouseleave(function(){a(s)}),t.blur(function(){e(t)}),t.mouseleave(function(){e(t)}),o.mouseleave(function(){r()}),o.blur(function(){r()}),$(".credit_form").submit(function(){var e=$(this),a=e.serialize();return $.ajax({type:"POST",url:"ctrl/mail.php",dataType:"json",data:a,beforeSend:function(e){n.attr("disabled","disabled")},success:function(e){e.error?$(".errors").html("<h3>Error:"+e.error+"</h3>"):($(".success").html("<h3>Thanks, your message has been sent.</h3>"),$(".calculator_text").addClass("hidden"))},error:function(e,a,r){$(".errors").html("<h3>Error:"+r+"</h3>"),$(".calculator_text").addClass("hidden")},complete:function(e){n.prop("disabled",!1)}}),!1}),$("#main_bg_img").change(function(){var e=$(this)[0];if(e.files&&e.files[0])if(e.files[0].type.match("image.*")){var a=new FileReader;a.onload=function(e){$("#image_preview").attr("src",e.target.result)},a.readAsDataURL(e.files[0])}else console.log("is not image mime type");else console.log("not isset files data or files API not supordet")})});